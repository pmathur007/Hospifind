{% extends "layout.html" %}
{% block content %}
    <section id="react_container"></section>
    <section id="home_info">
        <h2>Get the Care You Need</h2>
        <p class="mb-0">Hospifind shows you which hospitals have the capacity to treat you to ensure you get the care you need.</p>
        <p class="mt-3 mb-0">Your location has been detected as <strong>{{ address }}</strong>. If this is inaccurate, click this button to enter your location manually for better results.</p>
        <a href="{{ url_for('patient_form') }}" class="btn-light">Get Personalized Results</a>
        <a href="{{ url_for('input_location') }}" class="btn-light">Input Location</a>
    </section>
    <section>
        <div id="map"></div>
        <h3>{{ header }}</h3>
        <p class="mb-2 border-bottom">*Note: Ratings are based on hospital data only.</p>
        {% for hospital, rating in results.items() %}
            <div class="hospital_result">
                <h4>{{ hospital.name }}</h4>
                <p>{{ hospital.address }}</p>
                <div>
                    {% if rating == 'Great' %}
                        <p style="color:lime">{{ rating }}</p>
                    {% elif rating == 'Good' %}
                        <p style="color:green">{{ rating }}</p>
                    {% elif rating == 'OK' %}
                        <p style="color:orange">{{ rating }}</p>
                    {% elif rating == 'Low Availability' %}
                        <p style="color:red">{{ rating }}</p>
                    {% endif %}
                    <!-- <p>{{ hospital.admin_hex_id }}</p>
                    <p>{{ hospital.normal_hex_id }}</p> -->
                    <a href="{{ hospital.directions_link }}" class="btn-light col-sm-4">Get directions</a>
                </div>
            </div>
        {% endfor %}
    </section>
    <section>
        <h2>About</h2>
    </section>
    <section>
        <h2>Contact Us</h2>
        <form method="POST" action="">
            {{ form.hidden_tag() }}
            <fieldset class="form-group">
                <!-- <legend class="border-bottom mb-4">Contact Us</legend> -->
                  <div class="form-group">
                    {{ form.name.label(class="form-control-label") }}

                    {% if form.name.errors %}
                        {{ form.name(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.name.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ form.name(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
                <div class="form-group">
                    {{ form.email.label(class="form-control-label") }}

                    {% if form.email.errors %}
                        {{ form.email(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.email.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ form.email(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
                <div class="form-group">
                    {{ form.subject.label(class="form-control-label") }}

                    {% if form.subject.errors %}
                        {{ form.subject(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.subject.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ form.subject(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
                <div class="form-group">
                    {{ form.message.label(class="form-control-label") }}

                    {% if form.message.errors %}
                        {{ form.message(class="form-control form-control-lg is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.message.errors %}
                                <span>{{ error }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ form.message(class="form-control form-control-lg") }}
                    {% endif %}
                </div>
            </fieldset>
            <div class="form-group">
                {{ form.submit(class="btn btn-light") }}
            </div>
        </form>
    </section>
{% endblock content %}
